<!DOCTYPE html>
<html>
  <head>
    <style>
      body{
        height: 100vh;
        width: 100vw;
        margin: 0;
        padding: 0;
      }
      #fullwidthwrapper {
        width: 800px;
        height: 800px;
      }
      #sleak-fullwidth-clone {
        width: 100%;
        height: 100%;
        border: none;
      }
    </style>
  </head>
  <body>
    <script id="sleakbot" src="https://sleak-chat.github.io/sleakbot-v2/fetchsleakbot.js" chatbot-id="d167f594-ccfe-41b3-93a9-7f4bcc321317"></script>

    <div id="fullwidthwrapper">
      <iframe id="sleak-fullwidth-clone" frameborder="0" scrolling="no" src="about:blank" allowtransparency="true" referrerpolicy="no-referrer" allow="clipboard-read; clipboard-write"> </iframe>
      <script>
        const chatbotId = 'd167f594-ccfe-41b3-93a9-7f4bcc321317';

        function getCookie(key) {
        const encodedKey = encodeURIComponent(key) + "=";
        const cookies = document.cookie.split("; ");
        for (let c of cookies) {
          if (c.startsWith(encodedKey)) {
            return decodeURIComponent(c.substring(encodedKey.length));
          }
        }
        return null;
      }
        function updateIframe() {
          const visitorId = getCookie(`sleakVisitorId_${chatbotId}`);
          const chatId = getCookie(`sleakChatId_${chatbotId}`);
          if (visitorId) {
            document.getElementById('sleak-fullwidth-clone').src = `https://widget-v2-sigma.vercel.app/d167f594-ccfe-41b3-93a9-7f4bcc321317?visitor_id=${visitorId}&chat_id=${chatId}&placement=fullwidth`;
          } else {
            setTimeout(updateIframe, 100);
          }
        }
        updateIframe();
      </script>
    </div>
  </body>
</html>
